<div #chatMenuContainer>
    <div *ngIf="menuService.showDropdown"
      [ngClass]="{
        'animate-fade-in-right': menuService.isVisible,
        'animate-fade-out-left': !menuService.isVisible
                  }"
      class="fixed top-0 left-0 h-[90vh] max-h-[85vh] origin-top-right rounded-lg backdrop-blur-md"
      style="height: 100%; max-height: 100vh; overflow-y: auto; scrollbar-width: none; -ms-overflow-style: none;">
        <style>
            /* Hide scrollbar for WebKit browsers */
            div::-webkit-scrollbar {
                display: none;
            }
        </style>
      
        <!-- Search and Edit Section -->
        <div class="flex items-center gap-2 mt-2 mb-4 ml-5">
            <!-- Edit Button -->
            <button (click)="onEditClick()" [ngClass]="{'bg-blue-500': isEditing}" 
                class="w-12 h-12 bg-black/30 hover:bg-black/50 transition-all duration-300 cursor-pointer rounded-full flex items-center justify-center">
                <svg class="w-6 h-6 text-white" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M18 2L22 6M2 22L3.2764 17.3199C3.35968 17.0145 3.40131 16.8619 3.46523 16.7195C3.52199 16.5931 3.59172 16.4729 3.67332 16.3609C3.76521 16.2348 3.87711 16.1229 4.1009 15.8991L14.4343 5.56569C14.6323 5.36768 14.7313 5.26867 14.8455 5.23158C14.9459 5.19895 15.0541 5.19895 15.1545 5.23158C15.2687 5.26867 15.3677 5.36768 15.5657 5.56569L18.4343 8.43431C18.6323 8.63232 18.7313 8.73133 18.7684 8.84549C18.8011 8.94591 18.8011 9.05409 18.7684 9.15451C18.7313 9.26867 18.6323 9.36768 18.4343 9.56569L8.1009 19.8991C7.87711 20.1229 7.76521 20.2348 7.63908 20.3267C7.52709 20.4083 7.40692 20.478 7.28052 20.5348C7.13815 20.5987 6.98548 20.6403 6.68014 20.7236L2 22Z" stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                </svg>
            </button>

            <!-- Search Input -->
            <div class="flex items-center bg-gray-200 rounded-full px-3" style="width: 65%;">
                <input type="text" placeholder="Search..." class="flex-1 bg-transparent outline-none text-gray-800 p-2 rounded-full">
                <!-- Search Button -->
                <button class="p-2 bg-gray-300 rounded-full hover:bg-gray-400 transition-all duration-300">
                    <svg class="w-5 h-5 text-gray-800" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-4.35-4.35m1.85-5.15a7 7 0 11-14 0 7 7 0 0114 0z" />
                    </svg>
                </button>
            </div>
        </div>
    
        <div class="rounded-lg shadow-lg p-2 w-80 h-full flex flex-col bg-gray-200/20">
            <!-- Chat Items Section -->
            <div class="flex-1 overflow-y-auto space-y-1">
                <!-- Chat Item -->
                <div class="relative chat-item flex items-center gap-4 p-3 rounded-lg cursor-pointer hover:bg-gray-700/50 transition-colors duration-200" (click)="onChatItemClick('Ondřej Šibrava')">
                    <div class="w-12 h-12 flex items-center justify-center rounded-full">
                        <svg class="w-8 h-8 text-white" viewBox="0 0 24 24">
                            <path fill="currentColor" d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                        </svg>
                    </div>
                    <div class="flex-1">
                        <p class="font-semibold chat-item-text">Ondřej Šibrava</p>
                        <p class="text-sm chat-item-subtext">Last message preview...</p>
                    </div>
                    <span class="text-sm chat-item-time">3:26</span>

                    <!-- Overlay Div -->
                    <div *ngIf="isEditing" class="absolute inset-0 backdrop-blur-md bg-gray-900/80 z-10 flex items-center justify-center gap-25 rounded-lg">
                        <!-- Settings Button -->
                        <button class="w-12 h-12 bg-gray-700 rounded-md flex items-center justify-center">
                            <svg class="w-7 h-7 text-white" viewBox="0 0 24 24">
                                <path fill="currentColor" d="M12 8a4 4 0 1 1 0 8 4 4 0 0 1 0-8zm0-6a2 2 0 0 1 2 2v1.17a3.001 3.001 0 0 1 0 5.66V16a2 2 0 1 1-4 0v-1.17a3.001 3.001 0 0 1 0-5.66V4a2 2 0 0 1 2-2z"/>
                            </svg>
                        </button>
                        <!-- Delete Button -->
                        <button class="w-12 h-12 bg-red-500 rounded-md flex items-center justify-center">
                            <svg class="w-7 h-7 text-white" viewBox="0 0 24 24">
                                <path fill="currentColor" d="M9 3v1H4v2h16V4h-5V3H9zm1 5h4v10h-4V8zm-2 0v10H6V8h2zm8 0h2v10h-2V8z"/>
                            </svg>
                        </button>
                    </div>
                </div>
                
                <!-- Chat Item -->
                <div class="relative chat-item flex items-center gap-4 p-3 rounded-lg cursor-pointer hover:bg-gray-700/50 transition-colors duration-200" (click)="onChatItemClick('P3.B sk.2')" >
                    <div class="w-12 h-12 flex items-center justify-center bg-gray-600 rounded-full">
                        <svg class="w-8 h-8 text-white" viewBox="0 0 24 24">
                            <path fill="currentColor" d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                        </svg>
                    </div>
                    <div class="flex-1">
                        <p class="font-semibold chat-item-text">P3.B sk.2</p>
                        <p class="text-sm chat-item-subtext">Last message preview...</p>
                    </div>
                    <span class="text-sm chat-item-time">15:23</span>

                    <!-- Overlay Div -->
                    <div *ngIf="isEditing" class="absolute inset-0 backdrop-blur-md bg-gray-900/80 z-10 flex items-center justify-center gap-25 rounded-lg">
                        <!-- Settings Button -->
                        <button class="w-12 h-12 bg-gray-700 rounded-md flex items-center justify-center">
                            <svg class="w-7 h-7 text-white" viewBox="0 0 24 24">
                                <path fill="currentColor" d="M12 8a4 4 0 1 1 0 8 4 4 0 0 1 0-8zm0-6a2 2 0 0 1 2 2v1.17a3.001 3.001 0 0 1 0 5.66V16a2 2 0 1 1-4 0v-1.17a3.001 3.001 0 0 1 0-5.66V4a2 2 0 0 1 2-2z"/>
                            </svg>
                        </button>
                        <!-- Delete Button -->
                        <button class="w-12 h-12 bg-red-500 rounded-md flex items-center justify-center">
                            <svg class="w-7 h-7 text-white" viewBox="0 0 24 24">
                                <path fill="currentColor" d="M9 3v1H4v2h16V4h-5V3H9zm1 5h4v10h-4V8zm-2 0v10H6V8h2zm8 0h2v10h-2V8z"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

