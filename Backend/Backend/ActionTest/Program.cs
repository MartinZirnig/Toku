using BackendInterface.DataObjects;
using BackendInterface.Models;
using MysqlDatabase;

MysqlDatabase.MysqlDatabaseManager.DestroyDatabase();
MysqlDatabase.MysqlDatabaseManager.InitializeDatabase();


byte[] smallPngImage = new byte[]
{
    0x89, 0x50, 0x4E, 0x47, // PNG signature
    0x0D, 0x0A, 0x1A, 0x0A,
    // IHDR chunk (header)
    0x00, 0x00, 0x00, 0x0D,
    0x49, 0x48, 0x44, 0x52,
    0x00, 0x00, 0x00, 0x01, // Width: 1
    0x00, 0x00, 0x00, 0x01, // Height: 1
    0x08, // Bit depth: 8
    0x02, // Color type: Truecolor
    0x00, // Compression method
    0x00, // Filter method
    0x00, // Interlace method
    0x90, 0x77, 0x53, 0xDE, // CRC
    // IDAT chunk (image data)
    0x00, 0x00, 0x00, 0x0A,
    0x49, 0x44, 0x41, 0x54,
    0x08, 0xD7, 0x63, 0xF8, 0xCF, 0xC0, 0x00, 0x00, 0x03, 0x01, 0x01, 0x00,
    0x18, 0xDD, 0x8F, 0x8C, // CRC
    // IEND chunk
    0x00, 0x00, 0x00, 0x00,
    0x49, 0x45, 0x4E, 0x44,
    0xAE, 0x42, 0x60, 0x82
};

var fileOri = new FileModel(
    smallPngImage, "suspokus.png", 1,
    null, null, null
);

var file = new ManagedFileModel
(
 fileOri, "C:\\Users\\Martin\\Desktop"
);

var service = MysqlDatabase.MysqlDatabaseManager.GetFileServiceStatic();
var result = service.SaveFileAsync(file);